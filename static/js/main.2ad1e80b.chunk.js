(this["webpackJsonpstop-motion"]=this["webpackJsonpstop-motion"]||[]).push([[0],{21:function(e,t,r){},42:function(e,t,r){"use strict";r.r(t);var n,a=r(0),s=r(1),c=r.n(s),o=r(15),i=r.n(o),l=(r(21),r(3)),u=function(e){var t=Object(s.useState)("."),r=Object(l.a)(t,2),n=r[0],c=r[1];return Object(s.useEffect)((function(){var t=setInterval((function(){n.length>=e.maxNumber?c("."):c(n+".")}),e.interval);return function(){clearInterval(t)}})),Object(a.jsx)("span",{children:n})},j=r(2),d=r.n(j),b=r(4),m=r(8),f=!0;window.isSecureContext?n=Object(m.createFFmpeg)({log:!0}):f=!1;var p=function(e){var t=e.onChange,r=e.text;return Object(a.jsxs)("div",{className:"form__field overflow-hidden relative bg-purple-500 hover:bg-purple-900",children:[Object(a.jsxs)("button",{className:"button--upload",children:[Object(a.jsxs)("svg",{fill:"#FFF",height:"18",viewBox:"0 0 24 24",width:"18",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(a.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"})]}),Object(a.jsx)("span",{className:"ml-2",children:r})]}),Object(a.jsx)("input",{type:"file",accept:"image/jpeg",multiple:!0,className:"form__input--upload",onChange:t})]})},h=function(e){var t=e.progress;return Object(a.jsxs)("p",{children:[t," / 100"]})},v=function(e){var t=e.url;return Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("video",{controls:!0,src:t,className:"output__video"}),Object(a.jsx)("a",{className:"form__field button button--secondary",href:t,download:!0,children:"Download"})]})},O=function(e){var t=e.images;return Object(a.jsxs)("div",{className:"flex",children:["Selected ",t.length," files"]})},x=function(e){var t=e.progress,r=e.videoUrl,n=e.images;return Object(a.jsxs)("div",{className:"output",children:[t&&Object(a.jsx)(h,{progress:t}),r&&Object(a.jsx)(v,{url:r}),Object(a.jsx)(O,{images:n})]})};var g=function(){var e=function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),r=t[0],a=t[1],c=Object(s.useState)(!1),o=Object(l.a)(c,2),i=o[0],u=o[1],j=Object(s.useState)(null),p=Object(l.a)(j,2),h=p[0],v=p[1],O=Object(s.useState)(null),x=Object(l.a)(O,2),g=x[0],w=x[1],_=Object(s.useState)([]),F=Object(l.a)(_,2),N=F[0],S=F[1],y=Object(s.useState)(1),C=Object(l.a)(y,2),k=C[0],M=C[1],I=f?Object(b.a)(d.a.mark((function e(){var t,r,a,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),t=N.map((function(e){return Object(m.fetchFile)(e)})),e.next=4,Promise.all(t);case 4:for(r=e.sent,a=0;a<r.length;a++)n.FS("writeFile",N[a].name,r[a]);return e.next=8,n.run("-framerate","".concat(k),"-pattern_type","glob","-i","*.jpg","-c:v","libx264","-vf","scale=1920:1080","out.mp4");case 8:s=n.FS("readFile","out.mp4"),c=URL.createObjectURL(new Blob([s.buffer],{type:"video/mp4"})),w(c),u(!1);case 12:case"end":return e.stop()}}),e)}))):Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return Object(s.useEffect)((function(){f&&Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isLoaded()){e.next=5;break}return e.next=3,n.load();case 3:n.setProgress((function(e){var t=e.ratio;v(100*t)})),a(!0);case 5:case"end":return e.stop()}}),e)})))()}),[]),{loaded:r,converting:i,progress:h,framerate:k,setFramerate:M,videoUrl:g,images:N,setImages:S,convertToStopMotion:I}}(),t=e.loaded,r=e.framerate,c=e.setFramerate,o=e.images,i=e.setImages,j=e.converting,h=e.convertToStopMotion,v=e.progress,O=e.videoUrl;return t?Object(a.jsx)("div",{className:"app app__content",children:Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("header",{className:"card__header",children:"Stop motion maker"}),Object(a.jsxs)("div",{className:"card__content",children:[Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)(p,{onChange:function(e){return i(Array.from(e.target.files))},text:"Choose files to convert"}),Object(a.jsxs)("div",{className:"form__field",children:[Object(a.jsx)("label",{className:"form__label",children:"Framerate"}),Object(a.jsx)("input",{type:"number",id:"framerate",name:"framerate",value:r,onChange:function(e){return c(parseFloat(e.target.value))},className:"form__input"})]}),Object(a.jsx)("button",{onClick:h,disabled:j,className:"button button--secondary "+(j?"button--disabled":""),children:"Convert"})]}),Object(a.jsx)(x,{progress:v,images:o,videoUrl:O})]})]})}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Make sure you are running a browser that ",Object(a.jsx)("a",{href:"https://caniuse.com/sharedarraybuffer",children:"supports SharedArrayBuffer"})]}),Object(a.jsxs)("p",{children:["Loading FFMPEG module, this can take some time",Object(a.jsx)(u,{maxNumber:3,interval:250})]})]})},w=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,43)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(g,{})}),document.getElementById("root")),w()}},[[42,1,2]]]);
//# sourceMappingURL=main.2ad1e80b.chunk.js.map