(this["webpackJsonpstop-motion"]=this["webpackJsonpstop-motion"]||[]).push([[0],{21:function(e,t,r){},42:function(e,t,r){"use strict";r.r(t);var a,n=r(0),c=r(1),s=r.n(c),o=r(15),i=r.n(o),l=(r(21),r(3)),u=function(e){var t=Object(c.useState)("."),r=Object(l.a)(t,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){var t=setInterval((function(){a.length>=e.maxNumber?s("."):s(a+".")}),e.interval);return function(){clearInterval(t)}})),Object(n.jsx)("span",{children:a})},j=r(2),b=r.n(j),d=r(4),m=r(8),p=!0;window.isSecureContext?a=Object(m.createFFmpeg)({log:!0}):p=!1;var f=function(e){var t=e.onChange,r=e.text;return Object(n.jsxs)("div",{className:"form__field overflow-hidden relative bg-purple-500 hover:bg-purple-900",children:[Object(n.jsxs)("button",{className:"button--upload",children:[Object(n.jsxs)("svg",{fill:"#FFF",height:"18",viewBox:"0 0 24 24",width:"18",xmlns:"http://www.w3.org/2000/svg",children:[Object(n.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(n.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"})]}),Object(n.jsx)("span",{className:"ml-2",children:r})]}),Object(n.jsx)("input",{type:"file",accept:"image/jpeg",multiple:!0,className:"form__input--upload",onChange:t})]})},h=function(e){var t=e.progress;return Object(n.jsxs)("p",{children:[t," / 100"]})},v=function(e){var t=e.url;return Object(n.jsxs)("div",{className:"form",children:[Object(n.jsx)("video",{controls:!0,src:t,className:"output__video"}),Object(n.jsx)("a",{className:"form__field button button--secondary",href:t,download:!0,children:"Download"})]})},O=function(e){var t=e.images;return Object(n.jsx)("div",{className:"flex",children:t.map((function(e){return Object(n.jsxs)("div",{className:"image-preview",children:[Object(n.jsx)("img",{src:URL.createObjectURL(e),className:"image-preview__thumbnail",alt:""}),Object(n.jsx)("p",{className:"image-preview__image-name",children:e.name})]},e.name)}))})},x=function(e){var t=e.progress,r=e.videoUrl,a=e.images;return Object(n.jsxs)("div",{className:"output",children:[t&&Object(n.jsx)(h,{progress:t}),r&&Object(n.jsx)(v,{url:r}),Object(n.jsx)(O,{images:a})]})};var g=function(){var e=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),r=t[0],n=t[1],s=Object(c.useState)(!1),o=Object(l.a)(s,2),i=o[0],u=o[1],j=Object(c.useState)(null),f=Object(l.a)(j,2),h=f[0],v=f[1],O=Object(c.useState)(null),x=Object(l.a)(O,2),g=x[0],w=x[1],_=Object(c.useState)([]),N=Object(l.a)(_,2),F=N[0],S=N[1],y=Object(c.useState)(1),C=Object(l.a)(y,2),k=C[0],L=C[1],U=p?Object(d.a)(b.a.mark((function e(){var t,r,n,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),t=F.map((function(e){return Object(m.fetchFile)(e)})),e.next=4,Promise.all(t);case 4:for(r=e.sent,n=0;n<r.length;n++)a.FS("writeFile",F[n].name,r[n]);return e.next=8,a.run("-framerate","".concat(k),"-pattern_type","glob","-i","*.jpg","-c:v","libx264","-vf","scale=1920:1080","out.mp4");case 8:c=a.FS("readFile","out.mp4"),s=URL.createObjectURL(new Blob([c.buffer],{type:"video/mp4"})),w(s),u(!1);case 12:case"end":return e.stop()}}),e)}))):Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return Object(c.useEffect)((function(){p&&Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.isLoaded()){e.next=5;break}return e.next=3,a.load();case 3:a.setProgress((function(e){var t=e.ratio;v(100*t)})),n(!0);case 5:case"end":return e.stop()}}),e)})))()}),[]),{loaded:r,converting:i,progress:h,framerate:k,setFramerate:L,videoUrl:g,images:F,setImages:S,convertToStopMotion:U}}(),t=e.loaded,r=e.framerate,s=e.setFramerate,o=e.images,i=e.setImages,j=e.converting,h=e.convertToStopMotion,v=e.progress,O=e.videoUrl;return t?Object(n.jsx)("div",{className:"app app__content",children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("header",{className:"card__header",children:"Stop motion maker"}),Object(n.jsxs)("div",{className:"card__content",children:[Object(n.jsxs)("div",{className:"form",children:[Object(n.jsx)(f,{onChange:function(e){return i(Array.from(e.target.files))},text:"Choose files to convert"}),Object(n.jsxs)("div",{className:"form__field",children:[Object(n.jsx)("label",{className:"form__label",children:"Framerate"}),Object(n.jsx)("input",{type:"number",id:"framerate",name:"framerate",value:r,onChange:function(e){return s(parseFloat(e.target.value))},className:"form__input"})]}),Object(n.jsx)("button",{onClick:h,disabled:j,className:"button button--secondary "+(j?"button--disabled":""),children:"Convert"})]}),Object(n.jsx)(x,{progress:v,images:o,videoUrl:O})]})]})}):Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{children:["Make sure you are running a browser that ",Object(n.jsx)("a",{href:"https://caniuse.com/sharedarraybuffer",children:"supports SharedArrayBuffer"})]}),Object(n.jsxs)("p",{children:["Loading FFMPEG module, this can take some time",Object(n.jsx)(u,{maxNumber:3,interval:250})]})]})},w=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,43)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(g,{})}),document.getElementById("root")),w()}},[[42,1,2]]]);
//# sourceMappingURL=main.ecce767f.chunk.js.map